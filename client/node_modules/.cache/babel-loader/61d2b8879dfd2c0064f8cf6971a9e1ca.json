{"ast":null,"code":"import \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/Users/arjunwang/PlanAhead copy/client/src/secondPage/newPlanner.jsx\";\nimport React, { Component } from \"react\";\nimport Sem from \"./sem\";\nimport storage from \"../component/storage\";\nimport \"../style/planner.less\";\n\nclass NPlanner extends Component {\n  constructor(props) {\n    super(props);\n\n    this.year = id => {\n      const number = parseInt(id.substring(1));\n      let year = number;\n\n      if (year / 4 !== Math.floor(year / 4)) {\n        year = Math.floor(year / 4) + 1;\n      } else {\n        year = year / 4;\n      }\n\n      return \"Year \".concat(year);\n    };\n\n    this.semester = id => {\n      const number = parseInt(id.substring(1));\n\n      if (number % 4 === 1) {\n        return \"Semester 1\";\n      } else if (number % 4 === 2) {\n        return \"Vacation 1\";\n      } else if (number % 4 === 3) {\n        return \"Semester 2\";\n      } else {\n        return \"Vacation 2\";\n      }\n    };\n\n    const _this$props = this.props,\n          adyear = _this$props.adyear,\n          major = _this$props.major,\n          init = _this$props.init;\n    const all = storage.getYM(adyear, major);\n\n    if (init) {\n      this.state = {\n        semesters: [[\"s1\", 0, []], [\"s3\", 0, []], [\"s5\", 0, []], [\"s7\", 0, []], [\"s9\", 0, []], [\"s11\", 0, []], [\"s13\", 0, []], [\"s15\", 0, []]]\n      };\n    } else {\n      let list = [];\n      let i = 0;\n\n      while (i < 20) {\n        i++;\n\n        if (\"s\" + i in all) {\n          list.push([\"s\" + i, parseInt(storage.getYMCol(adyear, major, \"\".concat(\"s\" + i, \"button\"))), storage.getYMCol(adyear, major, \"\".concat(\"s\" + i))]);\n        }\n      }\n\n      this.state = {\n        semesters: list\n      };\n    }\n\n    this.handleAdd = this.handleAdd.bind(this);\n    this.handleChoose = this.handleChoose.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.year = this.year.bind(this);\n    this.semester = this.semester.bind(this);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"planner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, this.state.semesters.map(sem => React.createElement(Sem, {\n      id: sem[0],\n      key: sem[0],\n      year: this.year(sem[0]),\n      semester: this.semester(sem[0]),\n      onChoose: this.handleChoose,\n      onDelete: this.handleDelete,\n      adyear: this.props.adyear,\n      major: this.props.major,\n      button: sem[1],\n      modules: sem[2],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"plus\",\n      onClick: this.handleAdd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"+\"));\n  }\n\n  handleAdd() {\n    const _this$props2 = this.props,\n          adyear = _this$props2.adyear,\n          major = _this$props2.major;\n    var semesters = this.state.semesters;\n\n    if (semesters.filter(s => s[0] === \"t\").length > 0) {\n      return;\n    }\n\n    this.setState(prevState => prevState.semesters.push([\"t\", 0, []]));\n    storage.addNewCol(adyear, major, \"t\");\n  }\n\n  handleChoose(e) {\n    const _this$props3 = this.props,\n          adyear = _this$props3.adyear,\n          major = _this$props3.major;\n    const code = e;\n    const exist = \"s\" + code;\n    const semesters = this.state.semesters;\n\n    if (code === \"19\" && semesters.filter(s => {\n      return parseInt(s[0].substring(1)) === 17;\n    }).length === 0) {\n      return;\n    }\n\n    if (code !== \"17\" && code !== \"19\" && semesters.filter(s => {\n      return parseInt(s[0].substring(1)) > parseInt(code) && s[0] !== \"t\";\n    }).length === 0) {\n      return;\n    }\n\n    const index = \"t\";\n    const ind = semesters.findIndex(x => x[0] === index);\n    semesters.splice(ind, 1);\n\n    if (semesters.filter(s => s[0] === exist).length > 0) {\n      _message.warning(\"this semester already exists in your timetable\", 5);\n\n      return;\n    }\n\n    if (semesters.filter(x => x[0] === \"s\" + code).length === 0) {\n      semesters.push([\"s\" + code, 0, []]);\n      storage.addNewCol(adyear, major, \"s\" + code);\n    }\n\n    this.setState({\n      semesters: semesters.sort((a, b) => Number(a[0].toString().substring(1)) - Number(b[0].toString().substring(1)))\n    });\n  }\n\n  handleDelete(e) {\n    const _this$props4 = this.props,\n          adyear = _this$props4.adyear,\n          major = _this$props4.major;\n    const index = e.target.value;\n    let sem = document.getElementById(index);\n    let count = 0;\n\n    while (sem.hasChildNodes() && sem.lastChild.getAttribute(\"name\") !== null) {\n      let lastChild = sem.lastChild;\n      count += parseInt(lastChild.firstChild.getAttribute(\"mc\"));\n      sem.removeChild(lastChild);\n\n      if (lastChild.getAttribute(\"name\") === \"firstMajor\") {\n        document.getElementById(\"SideBarContainer\").append(lastChild);\n        storage.dndChange(adyear, major, index, \"SideBarContainer\", lastChild.firstChild.id, \"rgb(84,169,139)\");\n      } else if (lastChild.getAttribute(\"name\") === \"additional\") {\n        document.getElementById(\"SearchBarContainer\").append(lastChild);\n        storage.dndChange(adyear, major, index, \"SearchBarContainer\", lastChild.firstChild.id, \"rgb(120,206,179)\");\n      }\n    }\n\n    document.getElementById(\"totalmc\").innerText -= count;\n    storage.changeTotalMc(adyear, major, -count);\n    const ind = this.state.semesters.findIndex(x => x[0] === index);\n    this.setState({\n      semester: this.state.semesters.splice(ind, 1)\n    });\n    storage.removeCol(adyear, major, index);\n  }\n\n}\n\nexport default NPlanner;","map":{"version":3,"sources":["/Users/arjunwang/PlanAhead copy/client/src/secondPage/newPlanner.jsx"],"names":["React","Component","Sem","storage","NPlanner","constructor","props","year","id","number","parseInt","substring","Math","floor","semester","adyear","major","init","all","getYM","state","semesters","list","i","push","getYMCol","handleAdd","bind","handleChoose","handleDelete","render","map","sem","filter","s","length","setState","prevState","addNewCol","e","code","exist","index","ind","findIndex","x","splice","warning","sort","a","b","Number","toString","target","value","document","getElementById","count","hasChildNodes","lastChild","getAttribute","firstChild","removeChild","append","dndChange","innerText","changeTotalMc","removeCol"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Sem from \"./sem\";\r\nimport { message } from \"antd\";\r\nimport storage from \"../component/storage\";\r\nimport \"../style/planner.less\";\r\n\r\nclass NPlanner extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { adyear, major, init } = this.props;\r\n    const all = storage.getYM(adyear, major);\r\n    if (init) {\r\n      this.state = {\r\n        semesters: [\r\n          [\"s1\", 0, []],\r\n          [\"s3\", 0, []],\r\n          [\"s5\", 0, []],\r\n          [\"s7\", 0, []],\r\n          [\"s9\", 0, []],\r\n          [\"s11\", 0, []],\r\n          [\"s13\", 0, []],\r\n          [\"s15\", 0, []]\r\n        ]\r\n      };\r\n    } else {\r\n      let list = [];\r\n      let i = 0;\r\n      while (i < 20) {\r\n        i++;\r\n        if (\"s\" + i in all) {\r\n          list.push([\r\n            \"s\" + i,\r\n            parseInt(storage.getYMCol(adyear, major, `${\"s\" + i}button`))\r\n          , storage.getYMCol(adyear, major, `${\"s\" + i}`)]);\r\n        }\r\n      }\r\n      this.state = { semesters: list };\r\n    }\r\n    this.handleAdd = this.handleAdd.bind(this);\r\n    this.handleChoose = this.handleChoose.bind(this);\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n    this.year=this.year.bind(this);\r\n    this.semester=this.semester.bind(this);\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"planner\">\r\n        {this.state.semesters.map(sem => (\r\n          <Sem\r\n            id={sem[0]}\r\n            key={sem[0]}\r\n            year={this.year(sem[0])}\r\n            semester={this.semester(sem[0])}\r\n            onChoose={this.handleChoose}\r\n            onDelete={this.handleDelete}\r\n            adyear={this.props.adyear}\r\n            major={this.props.major}\r\n            button={sem[1]}\r\n            modules={sem[2]}\r\n          />\r\n        ))}\r\n        <button className=\"plus\" onClick={this.handleAdd}>\r\n          +\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleAdd() {\r\n    const { adyear, major } = this.props;\r\n    var semesters = this.state.semesters;\r\n    if (semesters.filter(s => s[0] === \"t\").length > 0) {\r\n      return;\r\n    }\r\n    this.setState(prevState => prevState.semesters.push([\"t\", 0, []]));\r\n    storage.addNewCol(adyear, major, \"t\");\r\n  }\r\n\r\n  handleChoose(e) {\r\n    const { adyear, major } = this.props;\r\n    const code = e;\r\n    const exist = \"s\" + code;\r\n    const semesters = this.state.semesters;\r\n    if (\r\n      code === \"19\" &&\r\n      semesters.filter(s => {\r\n        return parseInt(s[0].substring(1)) === 17;\r\n      }).length === 0\r\n    ) {\r\n      return;\r\n    }\r\n    if (\r\n      code !== \"17\" &&\r\n      code !== \"19\" &&\r\n      semesters.filter(s => {\r\n        return parseInt(s[0].substring(1)) > parseInt(code) && s[0] !== \"t\";\r\n      }).length === 0\r\n    ) {\r\n      return;\r\n    }\r\n    const index = \"t\";\r\n    const ind = semesters.findIndex(x => x[0] === index);\r\n    semesters.splice(ind, 1);\r\n    if (semesters.filter(s => s[0] === exist).length > 0) {\r\n      message.warning(\"this semester already exists in your timetable\", 5);\r\n      return;\r\n    }\r\n\r\n    if (semesters.filter(x => x[0] === \"s\" + code).length === 0) {\r\n      semesters.push([\"s\" + code, 0, []]);\r\n      storage.addNewCol(adyear, major, \"s\" + code);\r\n    }\r\n\r\n    this.setState({\r\n      semesters: semesters.sort(\r\n        (a, b) =>\r\n          Number(a[0].toString().substring(1)) -\r\n          Number(b[0].toString().substring(1))\r\n      )\r\n    });\r\n  }\r\n\r\n  handleDelete(e) {\r\n    const { adyear, major } = this.props;\r\n    const index = e.target.value;\r\n    let sem = document.getElementById(index);\r\n    let count = 0;\r\n    while (sem.hasChildNodes() && sem.lastChild.getAttribute(\"name\") !== null) {\r\n      let lastChild = sem.lastChild;\r\n      count += parseInt(lastChild.firstChild.getAttribute(\"mc\"));\r\n      sem.removeChild(lastChild);\r\n      if (lastChild.getAttribute(\"name\") === \"firstMajor\") {\r\n        document.getElementById(\"SideBarContainer\").append(lastChild);\r\n        storage.dndChange(\r\n          adyear,\r\n          major,\r\n          index,\r\n          \"SideBarContainer\",\r\n          lastChild.firstChild.id,\r\n          \"rgb(84,169,139)\"\r\n        );\r\n      } else if (lastChild.getAttribute(\"name\") === \"additional\") {\r\n        document.getElementById(\"SearchBarContainer\").append(lastChild);\r\n        storage.dndChange(\r\n          adyear,\r\n          major,\r\n          index,\r\n          \"SearchBarContainer\",\r\n          lastChild.firstChild.id,\r\n          \"rgb(120,206,179)\"\r\n        );\r\n      }\r\n    }\r\n    document.getElementById(\"totalmc\").innerText -= count;\r\n    storage.changeTotalMc(adyear, major, -count);\r\n    const ind = this.state.semesters.findIndex(x => x[0] === index);\r\n    this.setState({\r\n      semester: this.state.semesters.splice(ind, 1)\r\n    });\r\n    storage.removeCol(adyear, major, index);\r\n  }\r\n\r\n  year = id => {\r\n    const number = parseInt(id.substring(1));\r\n    let year = number;\r\n    if (year / 4 !== Math.floor(year / 4)) {\r\n      year = Math.floor(year / 4) + 1;\r\n    } else {\r\n      year = year / 4;\r\n    }\r\n    return `Year ${year}`;\r\n  };\r\n\r\n  semester = id => {\r\n    const number = parseInt(id.substring(1));\r\n    if (number % 4 === 1) {\r\n      return \"Semester 1\";\r\n    } else if (number % 4 === 2) {\r\n      return \"Vacation 1\";\r\n    } else if (number % 4 === 3) {\r\n      return \"Semester 2\";\r\n    } else {\r\n      return \"Vacation 2\";\r\n    }\r\n  };\r\n}\r\n\r\nexport default NPlanner;\r\n"]},"metadata":{},"sourceType":"module"}