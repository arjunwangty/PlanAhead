{"ast":null,"code":"import \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/Users/arjunwang/react/client/src/secondPage/newPlanner.jsx\";\nimport React, { Component } from \"react\";\nimport Sem from \"./sem\";\nimport storage from \"../component/storage\";\nimport \"../style/planner.less\";\n\nclass NPlanner extends Component {\n  constructor(props) {\n    super(props);\n\n    this.year = id => {\n      const number = parseInt(id.substring(1));\n      let year = number;\n\n      if (year / 4 !== Math.floor(year / 4)) {\n        year = Math.floor(year / 4) + 1;\n      } else {\n        year = year / 4;\n      }\n\n      return \"Year \".concat(year);\n    };\n\n    this.semester = id => {\n      const number = parseInt(id.substring(1));\n\n      if (number % 4 === 1) {\n        return \"Semester 1\";\n      } else if (number % 4 === 2) {\n        return \"Vacation 1\";\n      } else if (number % 4 === 3) {\n        return \"Semester 2\";\n      } else {\n        return \"Vacation 2\";\n      }\n    };\n\n    const _this$props = this.props,\n          adyear = _this$props.adyear,\n          major = _this$props.major,\n          init = _this$props.init;\n    const all = storage.getYM(adyear, major);\n\n    if (init) {\n      this.state = {\n        semesters: [[\"s1\", 0], [\"s3\", 0], [\"s5\", 0], [\"s7\", 0], [\"s9\", 0], [\"s11\", 0], [\"s13\", 0], [\"s15\", 0]]\n      };\n    } else {\n      let list = [];\n      let i = 0;\n\n      while (i < 20) {\n        i++;\n\n        if (\"s\" + i in all) {\n          list.push([\"s\" + i, parseInt(storage.getYMCol(adyear, major, \"\".concat(\"s\" + i, \"button\")))]);\n        }\n      }\n\n      this.state = {\n        semesters: list\n      };\n    }\n\n    this.handleAdd = this.handleAdd.bind(this);\n    this.handleChoose = this.handleChoose.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n\n  handleAdd() {\n    const _this$props2 = this.props,\n          adyear = _this$props2.adyear,\n          major = _this$props2.major;\n    var semesters = this.state.semesters;\n\n    if (semesters.filter(s => s[0] === \"t\").length > 0) {\n      return;\n    }\n\n    this.setState(prevState => prevState.semesters.push([\"t\", 0]));\n    storage.addNewCol(adyear, major, \"t\");\n  }\n\n  handleChoose(e) {\n    const _this$props3 = this.props,\n          adyear = _this$props3.adyear,\n          major = _this$props3.major;\n    const code = e;\n    const exist = \"s\" + code;\n    const semesters = this.state.semesters;\n\n    if (code === \"19\" && semesters.filter(s => {\n      return parseInt(s[0].substring(1)) === 17;\n    }).length === 0) {\n      return;\n    }\n\n    if (code !== \"17\" && code !== \"19\" && semesters.filter(s => {\n      return parseInt(s[0].substring(1)) > parseInt(code) && s[0] !== \"t\";\n    }).length === 0) {\n      return;\n    }\n\n    const index = \"t\";\n    const ind = semesters.findIndex(x => x[0] === index);\n    semesters.splice(ind, 1);\n\n    if (semesters.filter(s => s[0] === exist).length > 0) {\n      _message.warning(\"this semester already exists in your timetable\", 5);\n\n      return;\n    }\n\n    if (semesters.filter(x => x[0] === \"s\" + code).length === 0) {\n      semesters.push([\"s\" + code, 0]);\n      storage.addNewCol(adyear, major, \"s\" + code);\n    }\n\n    this.setState({\n      semesters: semesters.sort((a, b) => Number(a[0].toString().substring(1)) - Number(b[0].toString().substring(1)))\n    });\n  }\n\n  handleDelete(e) {\n    const _this$props4 = this.props,\n          adyear = _this$props4.adyear,\n          major = _this$props4.major;\n    const index = e.target.value;\n    let sem = document.getElementById(index);\n    let count = 0;\n\n    while (sem.hasChildNodes() && sem.lastChild.getAttribute(\"name\") !== null) {\n      let lastChild = sem.lastChild;\n      count += parseInt(lastChild.firstChild.getAttribute(\"mc\"));\n      sem.removeChild(lastChild);\n\n      if (lastChild.getAttribute(\"name\") === \"firstMajor\") {\n        document.getElementById(\"SideBarContainer\").append(lastChild);\n        storage.dndChange(adyear, major, index, \"SideBarContainer\", lastChild.firstChild.id, \"rgb(84,169,139)\");\n      } else if (lastChild.getAttribute(\"name\") === \"additional\") {\n        document.getElementById(\"SearchBarContainer\").append(lastChild);\n        storage.dndChange(adyear, major, index, \"SearchBarContainer\", lastChild.firstChild.id, \"rgb(120,206,179)\");\n      }\n    }\n\n    document.getElementById(\"totalmc\").innerText -= count;\n    storage.changeTotalMc(adyear, major, -count);\n    const ind = this.state.semesters.findIndex(x => x[0] === index);\n    this.setState({\n      semester: this.state.semesters.splice(ind, 1)\n    });\n    storage.removeCol(adyear, major, index);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"planner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, this.state.semesters.map(sem => React.createElement(Sem, {\n      id: sem[0],\n      key: sem[0],\n      year: this.year(sem[0]),\n      semester: this.semester(sem[0]),\n      onChoose: this.handleChoose,\n      onDelete: this.handleDelete,\n      adyear: this.props.adyear,\n      major: this.props.major,\n      button: sem[1],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    })), React.createElement(_Button, {\n      className: \"default\",\n      style: {\n        borderRadius: \"50%\",\n        textAlign: \"center\",\n        paddingLeft: \"12px\",\n        paddingTop: \"2px\",\n        height: \"40px\",\n        width: \"40px\",\n        marginLeft: \"20px\"\n      },\n      onClick: this.handleAdd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default NPlanner;","map":{"version":3,"sources":["/Users/arjunwang/react/client/src/secondPage/newPlanner.jsx"],"names":["React","Component","Sem","storage","NPlanner","constructor","props","year","id","number","parseInt","substring","Math","floor","semester","adyear","major","init","all","getYM","state","semesters","list","i","push","getYMCol","handleAdd","bind","handleChoose","handleDelete","filter","s","length","setState","prevState","addNewCol","e","code","exist","index","ind","findIndex","x","splice","warning","sort","a","b","Number","toString","target","value","sem","document","getElementById","count","hasChildNodes","lastChild","getAttribute","firstChild","removeChild","append","dndChange","innerText","changeTotalMc","removeCol","render","map","borderRadius","textAlign","paddingLeft","paddingTop","height","width","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Sem from \"./sem\";\r\nimport { message, Button, Icon } from \"antd\";\r\nimport storage from \"../component/storage\";\r\nimport \"../style/planner.less\";\r\n\r\nclass NPlanner extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { adyear, major, init } = this.props;\r\n    const all = storage.getYM(adyear, major);\r\n    if (init) {\r\n      this.state = {\r\n        semesters: [\r\n          [\"s1\", 0],\r\n          [\"s3\", 0],\r\n          [\"s5\", 0],\r\n          [\"s7\", 0],\r\n          [\"s9\", 0],\r\n          [\"s11\", 0],\r\n          [\"s13\", 0],\r\n          [\"s15\", 0]\r\n        ]\r\n      };\r\n    } else {\r\n      let list = [];\r\n      let i = 0;\r\n      while (i < 20) {\r\n        i++;\r\n        if (\"s\" + i in all) {\r\n          list.push([\r\n            \"s\" + i,\r\n            parseInt(storage.getYMCol(adyear, major, `${\"s\" + i}button`))\r\n          ]);\r\n        }\r\n      }\r\n      this.state = { semesters: list };\r\n    }\r\n    this.handleAdd = this.handleAdd.bind(this);\r\n    this.handleChoose = this.handleChoose.bind(this);\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n  }\r\n\r\n  handleAdd() {\r\n    const { adyear, major } = this.props;\r\n    var semesters = this.state.semesters;\r\n    if (semesters.filter(s => s[0] === \"t\").length > 0) {\r\n      return;\r\n    }\r\n    this.setState(prevState => prevState.semesters.push([\"t\", 0]));\r\n    storage.addNewCol(adyear, major, \"t\");\r\n  }\r\n\r\n  handleChoose(e) {\r\n    const { adyear, major } = this.props;\r\n    const code = e;\r\n    const exist = \"s\" + code;\r\n    const semesters = this.state.semesters;\r\n    if (\r\n      code === \"19\" &&\r\n      semesters.filter(s => {\r\n        return parseInt(s[0].substring(1)) === 17;\r\n      }).length === 0\r\n    ) {\r\n      return;\r\n    }\r\n    if (\r\n      code !== \"17\" &&\r\n      code !== \"19\" &&\r\n      semesters.filter(s => {\r\n        return parseInt(s[0].substring(1)) > parseInt(code) && s[0] !== \"t\";\r\n      }).length === 0\r\n    ) {\r\n      return;\r\n    }\r\n    const index = \"t\";\r\n    const ind = semesters.findIndex(x => x[0] === index);\r\n    semesters.splice(ind, 1);\r\n    if (semesters.filter(s => s[0] === exist).length > 0) {\r\n      message.warning(\"this semester already exists in your timetable\", 5);\r\n      return;\r\n    }\r\n\r\n    if (semesters.filter(x => x[0] === \"s\" + code).length === 0) {\r\n      semesters.push([\"s\" + code, 0]);\r\n      storage.addNewCol(adyear, major, \"s\" + code);\r\n    }\r\n\r\n    this.setState({\r\n      semesters: semesters.sort(\r\n        (a, b) =>\r\n          Number(a[0].toString().substring(1)) -\r\n          Number(b[0].toString().substring(1))\r\n      )\r\n    });\r\n  }\r\n\r\n  handleDelete(e) {\r\n    const { adyear, major } = this.props;\r\n    const index = e.target.value;\r\n    let sem = document.getElementById(index);\r\n    let count = 0;\r\n    while (sem.hasChildNodes() && sem.lastChild.getAttribute(\"name\") !== null) {\r\n      let lastChild = sem.lastChild;\r\n      count += parseInt(lastChild.firstChild.getAttribute(\"mc\"));\r\n      sem.removeChild(lastChild);\r\n      if (lastChild.getAttribute(\"name\") === \"firstMajor\") {\r\n        document.getElementById(\"SideBarContainer\").append(lastChild);\r\n        storage.dndChange(\r\n          adyear,\r\n          major,\r\n          index,\r\n          \"SideBarContainer\",\r\n          lastChild.firstChild.id,\r\n          \"rgb(84,169,139)\"\r\n        );\r\n      } else if (lastChild.getAttribute(\"name\") === \"additional\") {\r\n        document.getElementById(\"SearchBarContainer\").append(lastChild);\r\n        storage.dndChange(\r\n          adyear,\r\n          major,\r\n          index,\r\n          \"SearchBarContainer\",\r\n          lastChild.firstChild.id,\r\n          \"rgb(120,206,179)\"\r\n        );\r\n      }\r\n    }\r\n    document.getElementById(\"totalmc\").innerText -= count;\r\n    storage.changeTotalMc(adyear, major, -count);\r\n    const ind = this.state.semesters.findIndex(x => x[0] === index);\r\n    this.setState({\r\n      semester: this.state.semesters.splice(ind, 1)\r\n    });\r\n    storage.removeCol(adyear, major, index);\r\n  }\r\n\r\n  year = id => {\r\n    const number = parseInt(id.substring(1));\r\n    let year = number;\r\n    if (year / 4 !== Math.floor(year / 4)) {\r\n      year = Math.floor(year / 4) + 1;\r\n    } else {\r\n      year = year / 4;\r\n    }\r\n    return `Year ${year}`;\r\n  };\r\n\r\n  semester = id => {\r\n    const number = parseInt(id.substring(1));\r\n    if (number % 4 === 1) {\r\n      return \"Semester 1\";\r\n    } else if (number % 4 === 2) {\r\n      return \"Vacation 1\";\r\n    } else if (number % 4 === 3) {\r\n      return \"Semester 2\";\r\n    } else {\r\n      return \"Vacation 2\";\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"planner\">\r\n        {this.state.semesters.map(sem => (\r\n          <Sem\r\n            id={sem[0]}\r\n            key={sem[0]}\r\n            year={this.year(sem[0])}\r\n            semester={this.semester(sem[0])}\r\n            onChoose={this.handleChoose}\r\n            onDelete={this.handleDelete}\r\n            adyear={this.props.adyear}\r\n            major={this.props.major}\r\n            button={sem[1]}\r\n          />\r\n        ))}\r\n        <Button\r\n          className=\"default\"\r\n          style={{\r\n            borderRadius: \"50%\",\r\n            textAlign: \"center\",\r\n            paddingLeft: \"12px\",\r\n            paddingTop: \"2px\",\r\n            height: \"40px\",\r\n            width: \"40px\",\r\n            marginLeft: \"20px\"\r\n          }}\r\n          onClick={this.handleAdd}\r\n        >\r\n          <Icon type=\"plus\" />\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NPlanner;\r\n"]},"metadata":{},"sourceType":"module"}